@startuml
!theme plain
actor Organizer
participant "API Gateway" as Gateway
participant "Auth Service" as Auth
participant "Event Service" as EventService
participant "Ticket Service" as TicketService
database "Event DB" as EventDB
database "Ticket DB" as TicketDB

group Event Wizard Submission
    Organizer -> Gateway : POST /api/events/wizard (EventWizardRequest)
    activate Organizer
    activate Gateway
    Gateway -> Auth : Validate Token (Organizer)
    activate Auth
    Auth --> Gateway : Valid
    deactivate Auth
    
    Gateway -> EventService : submitWizard(EventWizardRequest)
    activate EventService
    
    EventService -> EventService : Validate Request
    
    EventService -> EventDB : Save Event Details (Organizer, Venue, etc.)
    activate EventDB
    EventDB --> EventService : Saved
    deactivate EventDB
    
    EventService -> EventDB : Save Showtimes, TicketTypes, Zones, Allocations
    activate EventDB
    EventDB --> EventService : Saved
    deactivate EventDB
    
    EventService -> EventService : Calculate Start/End Times
    EventService -> EventDB : Update Event Status (PENDING_APPROVAL)
    
    ' Sync with Ticket Service
    EventService -> TicketService : syncTicketConfig(TicketConfigSyncRequest)
    activate TicketService
    TicketService -> TicketDB : Save TicketConfigSnapshot
    activate TicketDB
    TicketDB --> TicketService : Saved
    deactivate TicketDB
    TicketService --> EventService : Sync Success
    deactivate TicketService
    
    EventService --> Gateway : Event Created (PENDING_APPROVAL)
    deactivate EventService
    
    Gateway --> Organizer : HTTP 200 OK / Event Details
    deactivate Gateway
    deactivate Organizer
end
@enduml
